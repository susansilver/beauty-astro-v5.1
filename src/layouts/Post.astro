---
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/base/BaseHead.astro";
import TOC from "../components/TableOfContents.astro";

interface Props {
  frontmatter: CollectionEntry<"blog">["data"] & {
    heroImage: {
      src: string;
    };
  };
  headings: {
    slug: string;
    text: string;
    depth: number;
  }[];
}

const { frontmatter, headings } = Astro.props;
---

<html lang="en" class="scroll-smooth">
  <head>
    <BaseHead
      title={frontmatter.title}
      description={frontmatter.description}
      image={frontmatter.heroImage.src}
    />
  </head>

  <body class="dark:bg-black-900">
    <main>
      <article id="single-article">
        <div
          id="meta"
          class="text-balance dark:bg-primary-200 dark:text-slate-900 bg-primary-200 text-black-900 p-20"
        >
          <h1
            class="title flex justify-center place-items-center text-center font-display font-semibold"
          >
            {frontmatter.title}
          </h1>

          <div
            class="flex justify-center place-items-center text-xl lg:text-3xl mt-5 font-display font-bold"
          >
            <p>Last updated on {frontmatter.updatedDate}</p>
          </div>
        </div>
        <hr />
        <div>
          <div class="mt-8 mx-auto grid grid-cols-12">
            <div class="col-span-3 col-start-2">
              <nav class="article-toc sticky top-0">
                {
                  headings && headings.length > 0 && (
                    <>
                      <h3>Table of Contents</h3>
                      <TOC headings={headings} />
                    </>
                  )
                }
              </nav>
            </div>
            <div class="col-start-5 col-span-7">
              <slot />
            </div>
          </div>
        </div>
      </article>
    </main>
  </body>
</html>
